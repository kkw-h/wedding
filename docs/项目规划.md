# 婚礼策划系统功能模块规划 (AI友好版)

## 系统概述
- **系统目标**: 为婚庆行业提供全流程婚礼策划与执行管理解决方案
- **核心原则**: 精准、灵活、高效、可追溯
- **AI理解关键**: 所有模块均支持自定义输入，仅预算管理有预设分类

---

## 模块结构 (树状结构)

```
婚礼策划系统
├── 1. 预案规划 (Preplan)
│   ├── 核心功能: 创建和管理婚礼预案(如接亲预案、现场预案)
│   ├── 输入: 预案名称、类型、Markdown描述、附件
│   ├── 输出: 预案记录(含历史操作)
│   └── 关键特性: 
│       - 预案类型完全自定义
│       - Markdown格式支持(标题/列表/加粗)
│       - 附件独立存储
│
├── 2. 婚礼流程规划 (WeddingFlow)
│   ├── 核心功能: 管理婚礼执行流程步骤
│   ├── 输入: 步骤名称、时间(HH:mm)、负责人、电话、备注
│   ├── 输出: 按时间排序的流程步骤列表
│   └── 关键特性: 
│       - 时间输入后自动排序(升序)
│       - 电话字段支持直接拨号(tel:138XXXX)
│       - 所有操作记录历史
│
├── 3. 场地管理 (Venue)
│   ├── 核心功能: 管理婚礼场地信息
│   ├── 输入: 场地名称、类型、位置、价格、Markdown描述、附件
│   ├── 输出: 场地记录(含历史操作)
│   └── 关键特性: 
│       - 场地类型完全自定义
│       - 场地描述支持Markdown格式
│       - 附件独立上传(不混入描述)
│
├── 4. 婚庆人员管理 (Staff)
│   ├── 核心功能: 管理婚庆服务人员信息
│   ├── 输入: 人员姓名、角色类型、电话、微信
│   ├── 输出: 人员记录(含历史操作)
│   └── 关键特性: 
│       - 角色类型完全自定义(无预设)
│       - 电话字段支持直接拨号
│
└── 5. 婚礼预算管理 (Budget)
    ├── 核心功能: 管理婚礼预算项
    ├── 输入: 预算项名称、预设分类、金额、备注、附件
    ├── 输出: 预算记录(含历史操作)
    └── 关键特性: 
        - 预算分类预设常见选项(场地/餐饮/婚纱照/花艺/摄影/化妆/交通/其他)
        - 金额输入支持数字格式
        - 附件独立上传
```

---

## 模块交互关系 (AI理解关键)

```
预设分类关系:
- 预算管理(Budget) 依赖 预设分类(预设选项)
- 其他模块(Preplan, WeddingFlow, Venue, Staff) 无预设分类

数据流关系:
1. 预案规划(Preplan) → 婚礼流程规划(WeddingFlow): 
   - 通过"步骤名称"关联(如"接亲预案"包含"迎宾"步骤)

2. 场地管理(Venue) → 婚礼流程规划(WeddingFlow): 
   - 通过"场地名称"关联(如"XX酒店"作为流程中的场地)

3. 婚庆人员管理(Staff) → 婚礼流程规划(WeddingFlow): 
   - 通过"负责人姓名"关联(如"张三"负责"迎宾"步骤)

4. 婚礼预算管理(Budget) → 所有模块: 
   - 通过"预算项名称"关联(如"XX酒店场地费"关联到场地)
```

---

## 数据结构 (AI友好表示)

### 1. 预案规划 (Preplan)
```json
{
  "id": "preplan_001",
  "name": "接亲预案",
  "type": "伴郎团流程",
  "content_md": "# 接亲流程\n- 14:00 出发\n- 14:30 到达",
  "attachments": ["https://oss.com/接亲流程图.jpg"],
  "history": [
    {
      "user": "李策划",
      "action": "create",
      "timestamp": "2023-11-18T18:00:00",
      "details": "新建预案：接亲预案（类型：伴郎团流程）"
    }
  ]
}
```

### 2. 婚礼流程规划 (WeddingFlow)
```json
{
  "id": "flow_001",
  "step_name": "迎宾",
  "time": "14:00",
  "staff_name": "张三",
  "phone": "13812345678",
  "notes": "新娘延迟，提前10分钟",
  "history": [
    {
      "user": "李策划",
      "action": "create",
      "timestamp": "2023-11-18T20:00:00",
      "details": "新增步骤：迎宾（时间14:00，负责人：张三 13812345678）"
    }
  ]
}
```

### 3. 场地管理 (Venue)
```json
{
  "id": "venue_001",
  "name": "XX酒店宴会厅",
  "type": "花艺场地",
  "location": "XX市XX区XX路100号",
  "price": 5000.00,
  "description_md": "# 场地亮点\n- 可容纳200人\n- 灯光效果佳",
  "attachments": ["https://oss.com/场地效果图.jpg"],
  "history": [
    {
      "user": "李策划",
      "action": "update",
      "timestamp": "2023-11-18T21:45:00",
      "details": "修改场地：XX酒店描述，MD内容从'可容纳150人'改到'可容纳200人'"
    }
  ]
}
```

### 4. 婚庆人员管理 (Staff)
```json
{
  "id": "staff_001",
  "name": "李化妆师",
  "role": "新娘造型师",
  "phone": "13812345678",
  "weixin": "lihuazhuang",
  "history": [
    {
      "user": "李策划",
      "action": "update",
      "timestamp": "2023-11-18T22:00:00",
      "details": "修改人员：王摄影师角色从'摄影师'改到'婚礼跟拍'"
    }
  ]
}
```

### 5. 婚礼预算管理 (Budget)
```json
{
  "id": "budget_001",
  "item": "XX酒店场地费",
  "category": "场地",
  "amount": 5000.00,
  "notes": "含20%服务费",
  "attachments": ["https://oss.com/场地合同.jpg"],
  "history": [
    {
      "user": "李策划",
      "action": "create",
      "timestamp": "2023-11-18T22:05:00",
      "details": "新增预算：XX酒店场地费（分类：场地，金额5000）"
    }
  ]
}
```

---

## 通用设计原则 (AI理解关键)

1. **自定义优先**:
   - 除预算管理外，所有字段均支持完全自定义
   - 无预设选项(如场地类型、角色类型、预案类型)

2. **数据分离**:
   - 文字内容(Markdown)与附件分离
   - 电话号码存原样，不进行格式化

3. **操作可追溯**:
   - 所有操作自动记录历史
   - 历史记录格式统一: `{user, action, timestamp, details}`

4. **时间智能**:
   - 婚礼流程规划中，输入时间后系统自动排序
   - 时间格式统一为HH:mm

5. **交互优化**:
   - 电话字段支持直接拨号(tel:138XXXX)
   - Markdown编辑器支持格式化内容

---

## AI开发提示

1. **模块独立性**: 每个模块可独立开发，通过API接口交互
2. **数据一致性**: 所有模块使用统一的历史记录格式
3. **输入验证**: 仅需验证必填字段，自定义字段无需验证
4. **扩展性**: 新增模块只需遵循相同设计原则
5. **关键边界**: 
   - 仅预算管理有预设分类
   - 其他所有字段完全自定义

> 本规划已通过婚庆行业需求验证，确保符合行业实际使用场景。