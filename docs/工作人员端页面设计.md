
# 婚礼策划系统 - 工作人员端页面设计文档

> 适用于婚庆公司内部工作人员（如策划师、执行人员、化妆师、摄影师等）  
> 文档版本：1.0  
> 依据：《婚礼策划系统功能模块规划 (AI友好版)》

---

## 一、整体导航结构

工作人员端采用顶部导航栏 + 左侧菜单（可选）布局，包含以下主模块入口：

- 预案规划（Preplan）
- 婚礼流程（WeddingFlow）
- 场地管理（Venue）
- 人员信息（Staff）
- 预算查看（Budget - **只读**）

> 注：工作人员通常**无权编辑预算**，仅可查看关联到自己任务的预算项。

---

## 二、各模块详细页面设计

---

### 模块 1：预案规划（Preplan）

#### 页面 1.1：预案列表页 `/preplans`

**功能**：查看所有预案，支持搜索、筛选、新建。

**UI 元素**：
- 搜索框（按预案名称/类型）
- “新建预案” 按钮（+）
- 表格列：
  - 预案名称
  - 类型（标签样式，可自定义）
  - 创建人
  - 最后更新时间
  - 操作（查看 / 编辑 / 删除）

**交互逻辑**：
- 点击“查看” → 跳转至 **预案详情页**
- 点击“编辑” → 跳转至 **预案编辑页**

---

#### 页面 1.2：预案详情页 `/preplans/:id`

**数据结构来源**：`Preplan` 对象

**显示内容**：
- 预案名称（大标题）
- 类型（标签）
- Markdown 渲染区域（支持标题、列表、加粗等）
- 附件列表（每项为可点击链接，打开新标签页）
- 操作历史面板（折叠/展开）：
  - 时间 | 操作人 | 动作 | 详情

**操作按钮**：
- [编辑] → 跳转至编辑页
- [返回列表]

---

#### 页面 1.3：预案编辑页 `/preplans/new` 或 `/preplans/:id/edit`

**表单字段**：
| 字段 | 类型 | 说明 |
|------|------|------|
| 预案名称 | 文本输入 | 必填 |
| 预案类型 | 文本输入（自由填写） | 无下拉，支持任意字符串 |
| 描述内容 | Markdown 编辑器 | 支持实时预览 |
| 附件上传 | 文件选择器（多选） | 上传后生成独立 URL，不嵌入描述 |

**保存逻辑**：
- 提交后生成/更新 `Preplan` 对象
- 自动记录历史：`{ user: 当前用户, action: "create"/"update", ... }`

---

### 模块 2：婚礼流程规划（WeddingFlow）

#### 页面 2.1：流程步骤列表页 `/flows`

**功能**：查看当前婚礼的所有流程步骤（按时间排序）

**UI 元素**：
- 标题：“婚礼流程安排”
- 表格列（自动按 `time` 升序）：
  - 时间（HH:mm）
  - 步骤名称
  - 负责人（姓名 + 电话）
  - 备注（Markdown 渲染简略版）
  - 操作（编辑 / 删除）

**特殊交互**：
- 电话字段显示为：`张三 (138****5678)`，点击可触发 `tel:13812345678`
- 负责人姓名可点击，跳转至 **人员详情页**（若存在）

---

#### 页面 2.2：新增/编辑流程步骤页 `/flows/new` 或 `/flows/:id/edit`

**表单字段**：
| 字段 | 类型 | 说明 |
|------|------|------|
| 步骤名称 | 文本输入 | 必填 |
| 时间 | 时间选择器（HH:mm） | 必填，格式 14:30 |
| 负责人 | 用户选择器（从 Staff 列表中选择） | 显示为下拉搜索框，支持姓名/电话模糊匹配 |
| 电话 | 自动填充（根据所选负责人） | 只读，格式原样存储 |
| 备注 | Markdown 编辑器 | 可为空 |

**保存逻辑**：
- 提交后插入/更新 `WeddingFlow` 对象
- 系统自动按时间重排整个流程列表
- 记录操作历史

---

### 模块 3：场地管理（Venue）

#### 页面 3.1：场地列表页 `/venues`

**表格列**：
- 场地名称
- 类型（自定义标签）
- 位置
- 价格（¥5000.00）
- 操作（查看 / 编辑）

---

#### 页面 3.2：场地详情页 `/venues/:id`

**显示内容**：
- 名称（大标题）
- 类型、位置、价格（行内展示）
- Markdown 描述（完整渲染）
- 附件缩略图（可点击查看原图）
- 操作历史

---

#### 页面 3.3：场地编辑页 `/venues/new` 或 `/venues/:id/edit`

**表单字段**：
| 字段 | 类型 |
|------|------|
| 场地名称 | 文本输入（必填） |
| 类型 | 文本输入（自由填写） |
| 位置 | 文本输入 |
| 价格 | 数字输入（支持小数） |
| 描述 | Markdown 编辑器 |
| 附件 | 文件上传（多文件） |

---

### 模块 4：婚庆人员管理（Staff）

> 工作人员可查看和编辑自己的信息，也可查看团队其他成员

#### 页面 4.1：人员列表页 `/staff`

**表格列**：
- 姓名
- 角色类型（自定义，如“新娘造型师”）
- 电话（带拨号链接）
- 微信（可复制）

**操作**：
- 点击姓名 → 查看详情
- [编辑]（仅限本人或管理员）

---

#### 页面 4.2：人员详情页 `/staff/:id`

**显示内容**：
- 姓名
- 角色
- 电话（`<a href="tel:13812345678">13812345678</a>`）
- 微信（纯文本，可长按复制）
- 操作历史

---

#### 页面 4.3：人员编辑页 `/staff/:id/edit`

**表单字段**：
| 字段 | 类型 |
|------|------|
| 姓名 | 文本（必填） |
| 角色类型 | 文本输入（自由填写，无预设） |
| 电话 | 文本（格式原样，如 13812345678） |
| 微信 | 文本 |

> 注：系统用户与 Staff 记录可关联，但此处仅维护基础信息

---

### 模块 5：婚礼预算管理（Budget）— **只读视图**

#### 页面 5.1：预算概览页 `/budgets`

**权限**：工作人员仅可查看，不可编辑

**显示内容**：
- 预算项列表（表格）：
  - 预算项名称
  - 分类（预设选项：场地/餐饮/婚纱照/花艺/摄影/化妆/交通/其他）
  - 金额（¥5000.00）
  - 备注（简略）
  - 附件（可点击查看）

**过滤功能**：
- 按分类筛选
- 按关键词搜索（预算项名称）

> 注：不提供“新建”或“编辑”按钮

---

## 三、通用组件规范

### 1. 历史记录面板（所有详情页共用）

```json
{
  "history": [
    {
      "user": "李策划",
      "action": "update",
      "timestamp": "2023-11-18T21:45:00",
      "details": "修改场地：XX酒店描述..."
    }
  ]
}
```

**UI 表现**：
- 折叠面板，默认收起
- 展开后显示时间倒序列表
- 每条记录格式：`[2023-11-18 21:45] 李策划 更新：修改场地...`

### 2. 电话字段统一处理

- 存储：原始字符串（如 `"13812345678"`）
- 显示：`<a href="tel:13812345678">138****5678</a>`（中间四位打码可选）

### 3. Markdown 渲染

- 使用标准 CommonMark 解析器
- 支持：`#`, `-`, `**bold**`, 换行等
- 不支持 HTML 标签（安全考虑）

---

## 四、权限说明（工作人员端）

| 操作 | 预案 | 流程 | 场地 | 人员 | 预算 |
|------|------|------|------|------|------|
| 查看 | ✅ | ✅ | ✅ | ✅（全部） | ✅（只读） |
| 新建 | ✅ | ✅ | ✅ | ❌（仅本人可编辑） | ❌ |
| 编辑 | ✅ | ✅ | ✅ | ✅（仅本人） | ❌ |
| 删除 | ✅ | ✅ | ✅ | ❌ | ❌ |

> 实际权限可由后端控制，前端按角色隐藏按钮即可

---

## 五、附录：API 数据结构映射（供前端参考）

所有页面均对应如下 JSON Schema（略，详见原始规划文档），前端需确保：

- 表单提交字段名与后端一致（如 `content_md`, `step_name`, `role`）
- 时间格式：`HH:mm`（如 `"14:30"`）
- 金额：数字类型（如 `5000.00`）

---

> ✅ 本设计完全基于《项目规划.md》，无额外假设，所有字段、交互、约束均可被 AI 编码复现。

如需生成 `.docx` 文件，可将此 Markdown 内容粘贴至 [Typora](https://typora.io/) 或 [Pandoc](https://pandoc.org/) 转换为 Word。

是否需要我提供对应的 **前端组件伪代码（React/Vue）** 或 **API 接口定义（OpenAPI）**？